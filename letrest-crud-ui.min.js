function crudFieldDirective(a,b,c,d){function e(a){var c=d.getLetRestService(a.provider.path);b.info("Pulling field data for",a.provider.path),a.loading=!0,a.failed=!1,c.getAll({FROM:0,ROWS:100}).then(function(c){b.info("Successfully pulled the data from",a.provider,c),a.data=a.data||[],angular.copy(c.data,a.data),a.loading=!1})["catch"](function(c){a.failed=!0,b.error("Failed to pull data for",a.provider,c)})}function f(b,d){var f=c.getTemplate(b.type,b.view);"custom"==b.type&&(b.CRUD=b.$parent),b.provider&&(b.provider.values?(b.data=b.data||[],angular.copy(b.provider.values,b.data)):e(b)),f.success(function(c){d.html(c);var e=a(d.html())(b);d.replaceWith(e)})}function g(a,c){function e(){a.loading=!0;var c=!1;angular.forEach(a.data,function(d){if(!c)try{var e=a.model[a.id],f=a.provider.valueFrom,g=angular.equals(d[f],e[f]);g&&(a.model.newItem&&"undefined"==typeof e||(a.model[a.id]=d,c=!0))}catch(h){b.info("Match provider failed on ",a.id)}}),a.loading=!1}function f(b){b&&a.provider&&a.data&&0!==a.data.length&&e()}a.$parent.CRUD&&(a.CRUD=a.$parent.CRUD),a.$watch("model",f),a.$watch("data",f),a.loadProvider=function(e,f){var g=c.defer(),h=d.getLetRestService(a.provider.path);return b.info("Pulling field data for",a.provider.path),h.getAll({FROM:0,ROWS:100}).then(function(a){g.resolve(a.data)})["catch"](function(a){g.reject(a)}),g.promise}}return g.$inject=["$scope","$q"],{restrict:"E",link:f,scope:{model:"=",type:"=",id:"=",label:"=",readonly:"=crudReadonly",provider:"=",alias:"=",template:"=",view:"=",weight:"=",icon:"=",classGroup:"=",classField:"=",classLabel:"=",field:"=",validations:"=",form:"=","default":"=",onChange:"=",onClear:"="},controller:g}}function CRUDTemplates(a,b,c){function d(c,d){var e=g[c]||d;return a.get(e,{cache:b})}function e(a,b){g[a]=b}var f=c.templates,g={text:f+"crud-field-basic.html",empty:f+"crud-field-empty.html",separator:f+"crud-field-separator.html",password:f+"crud-field-basic.html",number:f+"crud-field-basic.html",email:f+"crud-field-basic.html",textarea:f+"crud-field-area.html",select:f+"crud-field-select.html",check:f+"crud-field-check.html",date:f+"crud-field-date.html",finder:f+"crud-field-finder.html",file:f+"crud-field-file.html"},h=this;h.getTemplate=d,h.registerTemplate=e}angular.module("CRUD",["letrest","ui.router","LocalStorageModule","ngFileUpload","pascalprecht.translate"]).constant("CRUD_K",{templates:"letrest-crud/views/"}).config(["$httpProvider",function(a){a.defaults.useXDomain=!0,delete a.defaults.headers.common["X-Requested-With"]}]).config(["$translateProvider",function(a){a.translations("en",{SHOW_FILTERS:"Show filters",HIDE_FILTERS:"Hide filters",COLUMNS:"Columns",SAVE_TEMPLATE:"Save Template",STATISTICS:"Statistics",RESET:"Reset",FILTERED:"Filtered",GROUPED:"Grouped",UPLOAD:"Upload",THIS_FIELD_IS_MANDATORY:"This field is mandatory",TOTALS:"Totals",CANCEL:"Cancel",SAVE:"Save",MEASURES:"Measures",QUICK_SEARCH:"Quick Search"}).translations("es",{SHOW_FILTERS:"Mostrar Filtros",HIDE_FILTERS:"Ocultar Filtros",COLUMNS:"Columnas",SAVE_TEMPLATE:"Guardar Plantilla",STATISTICS:"Estadisticas",RESET:"Resetear",FILTERED:"Filtrado",GROUPED:"Agrupados",UPLOAD:"Subir",THIS_FIELD_IS_MANDATORY:"Este campo es obligatorio",TOTALS:"Totales",CANCEL:"Cancelar",SAVE:"Guardar",MEASURES:"Medidas",QUICK_SEARCH:"Busqueda rÃ¡pida"}).preferredLanguage("en")}]),angular.module("CRUD").filter("istarget",function(){return function(a,b){var c={};return angular.forEach(a,function(a,d){a.target&&a.target===b&&(c[d]=a)}),c}}),angular.module("CRUD").controller("CRUDCtrl",["$log","$timeout","$interval","$scope","$state","$stateParams","LetRestService","CRUDService","Upload","CRUDMessage",function(a,b,c,d,e,f,g,h,i,j){var k,l=this;l.save=!1,l.working=!1,l.$log=a,l.definition={},l.currentPage=1,l.maxRows=0,l.filter={},l.columns={};var m;l.editing=null,l.data=null,l.totalItems=null,l.hasQuickSearch=!1,l.quickSearchFilter="",l.savingTemplate=!1,l.templateName="",l.templates={},l.templateSelected="",l.hasGroup=!1,l.selection=null;var n;l.autoreload=null,l.order="",l.orderItem="",l.f=!0,d.$watch("crud",function(){g.getDefinition(d.crud).then(function(a){l.definition=a,l.mapping=l.definition.mapping||!1,l.maxRows=l.definition.rows,l.itemsPerPage=l.definition.itemsperpage,l.paginationAvailable="undefined"==typeof l.definition.pagination?!0:l.definition.pagination,l.dynamicItems=void 0!=l.itemsPerPage&&l.itemsPerPage.length>0,l.hasQuickSearch=!1,l.hasFilters=!1,l.hasGroup=void 0!=l.definition.group,l.hasGroup&&l.resetAggregate(),n=g.getLetRestService(l.definition.entity),l.data=n.all,l.totalItems=l.paginationAvailable?n.totalRows:0,angular.forEach(l.definition.filters,function(a){"quick"===(a.type||"string")?(l.hasQuickSearch=!0,l.quickSearchFilter=a.name):l.hasFilters=!0}),l.columns={},angular.forEach(l.definition.fields,function(a){a.listable&&(l.columns[a.name]=!0)}),l.templates=h.getTemplates(l.definition),l.definition.defaults&&(l.filter=l.definition.defaults.filter,l.grouped=l.definition.defaults.grouped,l.aggregated=l.definition.defaults.aggregated),l.definition.features=l.definition.features||{plain:!0,group:!0},l.findAll(),angular.isDefined(l.autoreload)&&b.cancel(l.autoreload),l.definition.autoreload&&(l.autoreload=c(function(){d.CRUD.findAll()},1e3*l.definition.autoreload))})}),l.resetColumns=function(){angular.forEach(l.columns,function(a,b){l.columns[b]=!0})},l.selected=function(a){l.definition.allowselection&&(l.selection=a,l.editing&&l.editItem(a))},l.filterChanged=function(){k&&b.cancel(k),k=b(function(){l.currentPage=1,l.findAll()},500)},l.cleanFilter=function(a){delete l.filter[a],l.filterChanged()},l.findFilterForKey=function(a){for(var b=0;b<l.definition.filters.length;b++){var c=l.definition.filters[b];if(c.name==a)return c}throw new Error("PANIC! Filter should be found.")},l.doError=function(a){return a.type&&"error"!=a.type?void console.log("Problems with the server, please contact the administrator"):void("business"==a.data.errorType?console.log(a.data.msg):console.log("Problem with the service, please try again."))},l.findAll=function(){if(!l.working){l.selection=null;var a=angular.copy(l.filter);e&&f&&angular.forEach(f,function(b,c){a[c]=angular.copy(b)}),angular.forEach(l.filter,function(b,c){if(b instanceof Array)if(b.length){var d=[],e=l.findFilterForKey(c).provider.valueFrom;angular.forEach(b,function(a){d.push(a[e])}),a[c]="@["+d.toString()+"]"}else delete a[c]});var b=angular.extend({FROM:(l.currentPage-1)*l.maxRows,ROWS:l.maxRows},a);if(l.isGrouping()){var c="";angular.forEach(l.grouped,function(a,b){a&&(c+=","+b)}),b=angular.extend(b,{GROUP:c.substring(1)});var d="";angular.forEach(l.aggregated,function(a,b){a&&(d+=","+b)}),b=angular.extend(b,{AGGREGATE:d.substring(1)})}l.orderItem&&(b=angular.extend(b,{ORDER:l.orderItem+" "+l.order})),l.cleanTotals(),l.working=!0,n.getAll(b).then(function(){l.totalItems=l.paginationAvailable?n.totalRows:0})["catch"](l.doError)["finally"](function(){l.working=!1})}},l.filterTarget=function(){return!0},l.addItem=function(){l.save=!1,l.selection=n.getNew(),l.editItem(l.selection)},l.editItem=function(a){l.definition.allowselection&&(a=l.selection),m={},l.editing=angular.copy(a,m);var b=!0;a[l.definition.pk]?b=!1:l.editing.available=!0,l.editing.newItem=b},l.cancel=function(){l.editing=null,l.selection=null},l.removeItem=function(a){l.definition.allowselection&&(a=l.selection),j.deleteConfirmation().then(function(b){return n["delete"](a).then(l.findAll)["catch"](l.doError).then(l.cancel)})},l.saveItem=function(){l.save=!0,l.valid()&&j.updateConfirmation().then(function(a){return n.save(l.editing).then(function(a){return l.editing.newItem||d.$broadcast("save",l.editing),l.editing=null,l.findAll(),a})["catch"](l.doError)})["catch"](function(a){console.log("No updating.")})},l.pullDataPage=function(){l.findAll()},l.quickSearch=function(a){""===a&&delete l.filter[l.quickSearchFilter],l.filterChanged()},l.isFiltered=function(){if(Object.keys(l.filter).length>0){var a=!0;return angular.forEach(l.filter,function(b){a=b instanceof Array?b.length>0:!0}),a}return!1},l.isGrouping=function(){if(l.grouped&&Object.keys(l.grouped).length>0){var a=!1;return angular.forEach(l.grouped,function(b){a=a||b}),a}return!1},l.cleanGroup=function(){l.grouped={},l.resetAggregate(),l.currentPage=1,l.findAll()},l.resetAggregate=function(){l.aggregated={},angular.forEach(l.definition.group.measures,function(a,b){l.aggregated[b]=!0})},l.hasTemplates=function(){return Object.keys(l.templates).length>0},l.cleanFilters=function(){l.savingTemplate=!1,l.templateName="",l.templateSelected="",l.filter={},l.filterChanged()},l.deleteTemplate=function(a){a&&(l.templates=h.deleteTemplate(l.definition,a),a==l.templateSelected&&(l.templateSelected=""))},l.saveTemplate=function(){if(l.templateName){h.saveTemplate(l.definition,l.templateName,l.columns,l.filter,l.quickSearchFilter),l.savingTemplate=!1;var a=l.templateName;l.templates=h.getTemplates(l.definition),l.selectTemplate(a)}},l.selectTemplate=function(a){if(a){l.templateSelected=a;var b=l.templates[a];angular.copy(b.filters,l.filter),angular.forEach(b.columns,function(a,b){l.columns[b]=a}),l.templateName=a}else l.templateSelected="",l.resetColumns(),l.cleanFilters();l.templatesOpened=!1,l.currentPage=1,l.findAll()},l.loadFilterTemporaryProvider=function(b){var c=this;c.tmpFilter=c.tmpFilter||{},c.tmpFilter[b.name]=[];var d=g.getLetRestService(b.provider.path);a.info("Pulling field data for",b.provider.path),d.getAll({FROM:0,ROWS:100}).then(function(a){angular.copy(a.data,c.tmpFilter[b.name])})["catch"](c.doError)},l.loadProvider=function(b,c){var d=g.getLetRestService(b.provider.path);return a.info("Pulling field data for",b.provider.path,c),d.getAll({quick:c,FROM:0,ROWS:100})},l.filterForTypeAhead=function(a,b){return l.loadProvider(a,b).then(function(a){return a.data.map(function(a){return a})})},l.getFormattedValue=function(b,c){if(c.format&&c.type)try{switch(c.type){case"date":return moment(b[c.name]).format(c.format)}}catch(d){a.error("Failed to format field",c.name)}return b[c.name]},l.objectToArray=function(a,b){var c=[];for(var d in a)a[d][b||"key"]=d,c.push(a[d]);return c},l.renderErrors=function(a,b){if(a&&b){for(var c in a.$error)if(a.$touched||a.$dirty)return b[c].message;if(b.custom)for(var e in b.custom){var f=b.custom[e];if(d[f.context][f.action](a))return f.message}}},l.fileSelected=function(a,b,c,d){if(c&&c.length)for(var e=0;e<c.length;e++){var f=c[e];i.upload({url:b,file:f}).success(function(a,b,c,d){console.log("file "+d.file.name+"uploaded. Response: "+a)})}},l.valid=function(){var a=!0;return angular.forEach(d.CRUD.innerForms,function(b,c){b.$invalid&&(b.field.$setTouched(),a=!1)}),a},l.changeDisplay=function(a){l.maxRows=a,l.currentPage=1,l.findAll()},l.orderBy=function(a){if(a!=l.orderItem)return l.order="desc",l.orderItem=a,void l.findAll();switch(l.order){case"desc":l.order="asc";break;case"asc":l.orderItem=""}l.findAll()},l.cleanTotals=function(){angular.forEach(l.totals,function(a,b){l.totals[b]=0})},l.orderAsc=function(a){return l.orderItem==a&&"asc"==l.order},l.orderDesc=function(a){return l.orderItem==a&&"desc"==l.order},l.controlOrder=function(a){l.orderItem==a&&(l.orderItem="")}}]),angular.module("CRUD").directive("crud",["CRUD_K","$state",function(a,b){return{restrict:"E",controller:"CRUDCtrl",controllerAs:"CRUD",scope:!0,link:function(a,c,d){b.$current.data&&b.$current.data.crud?a.crud=b.$current.data.crud:a.crud=d.crud}}}]),angular.module("CRUD").directive("crudActions",["$compile","$http","$templateCache","CRUD_K",function(a,b,c,d){return{restrict:"E",requires:"^crud",replace:!0,templateUrl:d.templates+"crud-actions.html",scope:!1}}]),angular.module("CRUD").directive("crudField",crudFieldDirective),crudFieldDirective.$inject=["$compile","$log","CRUDTemplates","LetRestService"],angular.module("CRUD").directive("crudFilters",["$compile","$http","$templateCache","CRUD_K",function(a,b,c,d){return{restrict:"E",requires:"^crud",replace:!0,templateUrl:d.templates+"crud-filters.html",scope:!1}}]),angular.module("CRUD").directive("crudForm",["CRUD_K",function(a){return{restrict:"E",replace:!0,templateUrl:a.templates+"crud-form.html",scope:{definition:"=",item:"="},controller:["$scope",function(a){a.CRUD=a.$parent.CRUD}]}}]),angular.module("CRUD").directive("crudList",["CRUD_K",function(a){return{restrict:"E",replace:!0,link:function(a,b,c){c.hideActions&&(a.CRUD.hideActions=!0)},templateUrl:a.templates+"crud-list.html"}}]),angular.module("CRUD").directive("crudListItem",["$compile",function(a){var b=function(b,c){if(b.field&&b.field.alias){var d=b.field.template,e=a("<span>"+d+"</span>")(b);c.html(e.contents())}if(b.dimension&&b.dimension.alias){var d=b.dimension.template,e=a("<span>"+d+"</span>")(b);c.html(e.contents())}};return{restrict:"A",link:b}}]),angular.module("CRUD").directive("crudPanel",["CRUD_K",function(a){return{restrict:"E",templateUrl:a.templates+"crud-new.html"}}]),angular.module("CRUD").factory("CRUDMessage",["$modal",function(a){var b=function(b){var c=b.messages,d={animation:!0,templateUrl:"letrest-crud/views/modal-template.html",controller:"ModalInstanceCtrl as instance"};return d.resolve={params:function(){return c}},a.open(d).result},c={};return c.confirmation=function(){return b({messages:{head:"Confirmation",body:"confirm",selectable:!1}})},c.updateConfirmation=function(){return b({messages:{head:"Update Confirmation",body:"This will update the register information on the system. Are you sure want to continue?",selectable:!0}})},c.deleteConfirmation=function(){return b({messages:{head:"Delete Confirmation",body:"This will delete the register from the system. Are you sure want to continue?",selectable:!0}})},c.customeMessage=function(b,c){var d=a.open({animation:!0,templateUrl:"letrest-crud/views/modal-template.html",controller:"ModalInstanceCtrl as instance",resolve:{params:function(){return{head:b,body:c}}}});d.result.then(function(){console.log("Modal ok ")},function(){console.log("Modal dismissed at: "+new Date)})},c}]),angular.module("CRUD").controller("ModalInstanceCtrl",["$modalInstance","params",function(a,b){var c=this;c.params=b,c.header=c.params.head,c.text=c.params.body,c.selectable=c.params.selectable,c.ok=function(){a.close()},c.cancel=function(){a.dismiss("cancel")}}]),angular.module("CRUD").factory("CRUDService",["localStorageService",function(a){var b={};return b.getTemplates=function(b){var c=a.get(b.name);return c?c:{}},b.saveTemplate=function(c,d,e,f,g){var h=b.getTemplates(c);h[d]={columns:e,filters:f,quicksearch:g},a.set(c.name,JSON.stringify(h))},b.deleteTemplate=function(c,d){var e=b.getTemplates(c);return delete e[d],a.set(c.name,JSON.stringify(e)),e},b}]),angular.module("CRUD").service("CRUDTemplates",CRUDTemplates),CRUDTemplates.$inject=["$http","$templateCache","CRUD_K"],angular.module("CRUD").run(["$templateCache",function(a){"use strict";a.put("letrest-crud/views/crud-actions.html",'<div class=crud-action-bar ng-if=CRUD.definition.actions.length><a ng-repeat=" actionDef in CRUD.definition.actions | filter:{target:\'bar\'} | orderBy:\'position\'" href="" class="{{actionDef.class}} margin-right-sm" ng-click="this[actionDef.context||\'CRUD\'][actionDef.action](item)" ng-show={{actionDef.show}} ng-disabled={{actionDef.disabled}} lr-show-at-least-on=actionDef.weight><i ng-if=actionDef.icon class={{actionDef.icon}}></i> {{ actionDef.label }}</a><div class="clear-both clearfix"></div></div>'),a.put("letrest-crud/views/crud-field-area.html",'<div class="crud-field area {{classGroup}}" lr-show-at-least-on={{weight}}><label for={{id}} class="crud-label {{classLabel}}" title={{label}}>{{label}}</label><textarea class="crud-control area {{classField}}" name={{id}} id={{id}} ng-model=model[id] ng-required=validations.required ng-pattern="(validations.pattern) ? validations.pattern.regexp:\'\'" ng-readonly=readonly tooltip="{{CRUD.renderErrors(CRUD.innerForms[id].field, validations )}}" tooltip-placement=bottom></textarea></div>'),a.put("letrest-crud/views/crud-field-basic.html",'<div class="{{classGroup}} crud-field" lr-show-at-least-on={{weight}} ng-form=CRUD.innerForms.{{id}}><label for={{id}} class="{{classLabel}} crud-label" title={{label}}>{{label}}</label><input ng-if=!readonly class="crud-control text {{classField}}" type={{type}} name=field id={{id}} ng-model=model[id] ng-required=validations.required ng-pattern="(validations.pattern) ? validations.pattern.regexp:\'\'" tooltip="{{CRUD.renderErrors(CRUD.innerForms[id].field, validations )}}" tooltip-placement="bottom"><label ng-if=readonly class="crud-control label">{{ model[id] }}</label></div>'),a.put("letrest-crud/views/crud-field-check.html",'<div class="crud-field check {{classGroup}}" lr-show-at-least-on={{weight}}><label for={{id}} class="crud-label {{classLabel}}" title={{label}}>{{label}}</label><input class="crud-control check {{classField}}" type=checkbox ng-model="model[id]"></div>'),a.put("letrest-crud/views/crud-field-date.html",'<div class="{{classGroup}} crud-field date" lr-show-at-least-on={{weight}}><label for={{id}} class="{{classLabel}} crud-label" title={{label}}>{{label}}</label><span tooltip="{{CRUD.renderErrors(CRUD.innerForms[id].field, validations )}}" tooltip-placement=top></span> <input class="crud-control text {{classField}}" ng-disabled=readonly name={{id}} ng-model=model[id] ng-click="f=!f;" datepicker-popup=M/dd/yyyy close-text=Close is-open=f close-on-date-selection=false ng-required=validations.required ng-pattern="(validations.pattern) ? validations.pattern.regexp:\'\'"> <a href="" ng-class="f?\'opened\':\'\'"><i class="glyphicon glyphicon-calendar"></i></a><!--<label ng-if="readonly" class="crud-control label ">{{ model[id] | date:\'M/dd/yyyy\' }}</label>--><!--<span class="crud-label error" ng-show="false">{{ \'THIS_FIELD_IS_MANDATORY\' | translate }}</span>--></div>'),a.put("letrest-crud/views/crud-field-empty.html",'<div class="crud-field empty {{classGroup}}"></div>'),a.put("letrest-crud/views/crud-field-file.html",'<div class="crud-field file {{classGroup}}" lr-show-at-least-on={{weight}}><label for={{id}} class="crud-label {{classLabel}}" title={{label}}>{{label}}</label><input name={{id}} id={{id}} type=file class="crud-control file {{classField}}" ngf-select ng-model=model[id] ngf-change="CRUD.fileSelected( id, field[\'uploadTo\'], $files, $event )" ngf-min-size=10>{{ \'UPLOAD\' | translate }}<span class="crud-label error" ng-show=false>{{ \'THIS_FIELD_IS_MANDATORY\' | translate }}</span></div>'),a.put("letrest-crud/views/crud-field-finder.html",'<div class="crud-field finder {{classGroup}}" lr-show-at-least-on={{weight}}><label for={{id}} class="crud-label {{classLabel}}" title={{label}}>{{label}}</label><finder id={{id}} model=model[id] config=field provider=CRUD.filterForTypeAhead on-change=onChange on-clear=onClear class-input="\'crud-control text\'" class={{classField}} finder-readonly=readonly></finder><span class="crud-label error" ng-show=false>{{ \'THIS_FIELD_IS_MANDATORY\' | translate }}</span></div>'),a.put("letrest-crud/views/crud-field-select.html",'<div class="crud-field combo {{classGroup}}" lr-show-at-least-on={{weight}} ng-form=CRUD.innerForms.{{id}}><label for={{id}} class="crud-label {{classLabel}}" title={{label}}>{{label}}</label><select class="crud-control combo {{classField}}" ng-if=model name=field id={{id}} ng-model=model[id] ng-disabled="(readonly || loading)" ng-options="opt[provider.textFrom] for opt in data track by opt[provider.valueFrom]" ng-required=validations.required tooltip="{{CRUD.renderErrors(CRUD.innerForms[id].field, validations )}}" tooltip-placement="bottom"><i ng-if=loading class="fa fa-refresh fa-spin" style="position: absolute; top: 8px;  left: 105px"></i></div>'),a.put("letrest-crud/views/crud-field-separator.html",'<div class="crud-field separator {{classGroup}}">{{label}}</div>'),a.put("letrest-crud/views/crud-filters.html",'<div class=crud-filters><!-- ACTION BAR --><div class=crud-filters-actionbar ng-class="CRUD.showFilters?\'withfilters\':\'\'"><div class="crud-filters-actionbar-item separator-top"></div><p class="crud-filters-actionbar-item quicksearch" ng-show=CRUD.hasQuickSearch><input type=search placeholder="{{ \'QUICK_SEARCH\' | translate }}" ng-model=CRUD.filter[CRUD.quickSearchFilter] ng-disabled=CRUD.working ng-change=CRUD.quickSearch(CRUD.filter[CRUD.quickSearchFilter])></p><p class=crud-filters-actionbar-item ng-repeat="filter in CRUD.definition.filters | filter:{type:\'!quick\',hidden:\'!true\',target:\'bar\'} | orderBy:\'position\'"><select ng-init=CRUD.loadFilterTemporaryProvider(filter) class="crud-filters-form-field combo" ng-if="filter.type==\'select\'" name={{filter.name}} id={{filter.name}} ng-model=CRUD.filter[filter.name] ng-disabled="(readonly || loading)" placeholder={{filter.provider.placeholder}} ng-change=CRUD.filterChanged()><option value="" disabled selected>{{filter.provider.placeholder}}</option><option ng-repeat="opt in CRUD.tmpFilter[filter.name]" value={{opt[filter.provider.valueFrom]}} ng-selected="opt[filter.provider.valueFrom]==CRUD.filter[filter.name]">{{opt[filter.provider.textFrom]}}</option></select></p><!-- SHOW / HIDE Filters --><a ng-if=CRUD.hasFilters class=crud-filters-actionbar-item href="" ng-click="CRUD.showFilters=!CRUD.showFilters"><span class=control-span ng-if=!CRUD.showFilters><i class="fa fa-filter"></i>&nbsp;{{ \'SHOW_FILTERS\' | translate }}</span> <span class=control-span ng-if=CRUD.showFilters><i class="fa fa-filter"></i>&nbsp;{{ \'HIDE_FILTERS\' | translate }}</span></a><!-- SHOW / HIDE Columns --> <span class=crud-filters-actionbar-item dropdown ng-if=CRUD.definition.features.plain><a ng-if=true dropdown-toggle ng-class="CRUD.isGrouping()?\'disabled text-muted not-allowed\':\'\'" href=""><span class=control-span><i class="fa fa-columns"></i>&nbsp;{{ \'COLUMNS\' | translate }}</span></a><ul class=dropdown-menu role=menu><!-- RESET --><li ng-repeat="f in CRUD.definition.fields | filter:{listable:true} | orderBy:\'position\'"><a href="" ng-click="CRUD.columns[f.name]=!CRUD.columns[f.name];CRUD.controlOrder(f.name);"><i class=fa ng-class="CRUD.columns[f.name]?\'fa-toggle-on\':\'fa-toggle-off\'" style="margin-right: 5px"></i> &nbsp;{{f.label}}</a></li><li class=divider></li><li><a href="" ng-click=CRUD.resetColumns()><i class="fa fa-undo" style="margin-right: 5px"></i> {{ \'RESET\' | translate }}</a></li></ul></span><!-- Templates --> <span ng-show=CRUD.hasTemplates() is-open=CRUD.templatesOpened class="crud-filters-actionbar-item dropdown"><a ng-if=true class=dropdown-toggle ng-class="CRUD.templateSelected?\'text-primary\':\'\'" href=""><span class=control-span><i class="fa fa-history"></i> {{CRUD.templateSelected||\' Templates\'}}</span></a> <span ng-if=CRUD.templateSelected class=text-primary style=cursor:pointer ng-click=CRUD.selectTemplate(null)><i class="fa fa-remove"></i></span><ul class=dropdown-menu role=menu><!-- RESET --><li ng-repeat="(k,template) in CRUD.templates | orderBy:\'position\'" class=crud-filters-actionbar-template-item><a ng-click=CRUD.selectTemplate(k) title={{k}} class=crud-filters-actionbar-template-link><p href="" class=crud-filters-actionbar-template-cuttext>{{k}}</p></a> <a href="" class=crud-filters-actionbar-template-delete ng-click=CRUD.deleteTemplate(k)><i class="fa fa-remove text-danger"></i></a></li></ul></span><!-- Name --><!-- Templates --> <span ng-show=CRUD.isFiltered() class="crud-filters-actionbar-item template"><a ng-if=!CRUD.savingTemplate ng-click="CRUD.savingTemplate=!CRUD.savingTemplate" href=""><span class=control-span><i class="fa fa-save"></i>&nbsp;{{ \'SAVE_TEMPLATE\' | translate }}</span></a><div ng-if=CRUD.savingTemplate class=saving><input type=save placeholder=Save ng-model=CRUD.templateName ng-disabled="CRUD.working"> <span class=text-primary ng-click=CRUD.saveTemplate()><i class="fa fa-check"></i></span> <span class=text-danger ng-click="CRUD.savingTemplate=false;CRUD.templateName=\'\';"><i class="fa fa-remove"></i></span></div></span><!-- Group --> <span ng-if=CRUD.hasGroup class=crud-filters-actionbar-item dropdown><a ng-if=true dropdown-toggle href=""><span class=control-span><i class="fa fa-bar-chart"></i>&nbsp;{{ \'STATISTICS\' | translate }}</span></a><ul class=dropdown-menu role=menu ng-click=$event.stopPropagation();><li ng-repeat="v in CRUD.objectToArray(CRUD.definition.group.dimensions) | orderBy:\'index\'"><a href="" ng-click="CRUD.grouped[v.key]=!CRUD.grouped[v.key];CRUD.controlOrder(v.key);CRUD.filterChanged();"><i class=fa ng-class="CRUD.grouped[v.key]?\'fa fa-check-square-o\':\'fa fa-square-o\'" style="margin-right: 5px"></i> &nbsp;{{v[v.key]}}</a></li><li class=divider>{{ \'MEASURES\' | translate }}</li><li ng-repeat="v in  CRUD.objectToArray(CRUD.definition.group.measures) | orderBy:\'index\'"><a href="" ng-click="CRUD.aggregated[v.key]=!CRUD.aggregated[v.key];CRUD.controlOrder(v.key);CRUD.filterChanged();"><i class=glyphicon ng-class="CRUD.aggregated[v.key]?\' glyphicon-eye-open\':\' glyphicon-eye-close\'" style="margin-right: 5px"></i> &nbsp;{{v[v.key]}}</a></li><li class=divider></li><!-- RESET --><li><a href="" ng-click=CRUD.resetGroup()><i class="fa fa-undo" style="margin-right: 5px"></i> {{ \'RESET\' | translate }}</a></li></ul></span><!-- ISFiltering --><div ng-show=CRUD.isFiltered() class=crud-filters-actionbar-item><a ng-click=CRUD.cleanFilters() class="btn btn-warning btn-xs" style="position: relative;top:-2px">{{ \'FILTERED\' | translate }} <i class="fa fa-remove fa-lg"></i></a></div><!-- IsGrouping --><div ng-show=CRUD.isGrouping()&&CRUD.features.plain class=crud-filters-actionbar-item><a ng-click=CRUD.cleanGroup() class="btn btn-warning btn-xs" style="position: relative;top:-2px;left:-6px">{{ \'GROUPED\' | translate }} <i class="fa fa-remove fa-lg"></i></a></div><div class="crud-filters-actionbar-item separator-bottom" style="margin-top: {{!CRUD.hasQuickSearch?\'10px\':\'0px\'}}"></div></div><!-- FILTERS --><!-- <pre>{{CRUD.filter | json }}</pre> --><div class=crud-filters-form ng-if=CRUD.showFilters&&CRUD.definition.filters><fieldset><div ng-repeat="filter in CRUD.definition.filters | filter:{type:\'!quick\',hidden:\'!true\',target:\'!bar\'}" class="crud-filters-form-field {{filter[\'class-filter\']||\'\'}}"><label for={{filter.name}}>{{filter.label}}</label><!-- Boolean --><a ng-if="filter.type==\'boolean\'" class="crud-filters-form-field boolean" ng-class="CRUD.filter[filter.name]==undefined?\'disabled\':\'\'" ng-model=CRUD.filter[filter.name] btn-checkbox btn-checkbox-true=true btn-checkbox-false=false><span class="fa-stack fa-lg"><i class="fa fa-stack-2x" ng-class="CRUD.filter[filter.name]?\'fa-toggle-on\':\'fa-toggle-off\'"></i></span></a><!-- String --> <input ng-if="filter.type==\'string\'" ng-disabled=CRUD.working ng-model=CRUD.filter[filter.name] name={{filter.name}} ng-change=CRUD.filterChanged() class="crud-filters-form-field text"><!-- Number --> <input ng-if="filter.type==\'number\'" ng-model=CRUD.filter[filter.name] name={{filter.name}} ng-change=CRUD.filterChanged() type=number class="crud-filters-form-field number"><!-- Date --><!-- FIXME --><!-- We should use the format as a global variable and we also have to define the range from the config\n\n                              min-date="{{filter.min||\'01-01-1900\'}}"\n                              max-date="{{filter.max||\'01-01-2020\'}}"\n                    --><div ng-if="filter.type==\'date\'" class="crud-filters-form-field date"><!--<pre>{{ f }}</pre>--><input ng-model=CRUD.filter[filter.name] datepicker-popup="{{filter.format||\'M/dd/yyyy\'}}" ng-change=CRUD.filterChanged(); ng-click="f=!f" close-text=Close is-open=f close-on-date-selection="false"> <a href="" ng-class="f?\'opened\':\'\'" ng-click="f=!f"><i class="glyphicon glyphicon-calendar"></i></a></div><!-- COMBO --><select ng-init=CRUD.loadFilterTemporaryProvider(filter) class="crud-filters-form-field combo" ng-if="filter.type==\'select\'" name={{filter.name}} id={{filter.name}} ng-model=CRUD.filter[filter.name] ng-disabled="(readonly || loading)" ng-change=CRUD.filterChanged() placeholder={{filter.provider.placeholder}}><option value="" disabled selected>{{filter.provider.placeholder}}</option><option ng-repeat="opt in CRUD.tmpFilter[filter.name]" value={{opt[filter.provider.valueFrom]}} ng-selected="opt[filter.provider.valueFrom]==CRUD.filter[filter.name]">{{opt[filter.provider.textFrom]}}</option></select><!-- Multiple --><finder ng-if="filter.type==\'tags\'" model=CRUD.filter[filter.name] config=filter provider=CRUD.filterForTypeAhead on-change=CRUD.filterChanged class-input="\'form-control\'"></finder><!-- Cleaner --><a ng-show="CRUD.filter[filter.name]||CRUD.filter[filter.name]==false||CRUD.filter[filter.name]==0" class=crud-filters-form-field-cleaner ng-click=CRUD.cleanFilter(filter.name)><i class="fa fa-ban fa-1x"></i></a></div></fieldset></div></div>'),a.put("letrest-crud/views/crud-form.html",'<form name=CRUD.crudForm class=crud-form role=form novalidate><!-- TO CONTROL DEFINITON--><!--<pre>{{ definition | json }}</pre>--><!--TO TEST THE DATA--><!--<pre>{{ item | json }}</pre>--><!--<pre>{{ CRUD.editing | json }}</pre>--><crud-field ng-repeat="field in definition.fields | filter:{editable: true}" id=field.name label=field.label type=field.type crud-readonly=field.readonly provider=field.provider alias=field.alias template=field.template view=field.view model=item weight=field.weight field=field class-group="field[\'class-group\'] " class-label="field[\'class-label\'] " class-field="field[\'class-field\'] " validations=field.validations default></crud-field></form>'),a.put("letrest-crud/views/crud-list.html",'<div class=crud-table-container ng-class="{\'editing\':CRUD.editing}"><div class=text-center><i ng-if=CRUD.working class="fa fa-2x fa-circle-o-notch fa-spin text-warning"></i></div><!-- GROUPING --><table ng-if=CRUD.isGrouping() class="table table-condensed crud-table" ng-class=""><thead><tr><th ng-if=CRUD.grouped[v.key] ng-repeat="v in CRUD.objectToArray(CRUD.definition.group.dimensions) | orderBy:\'index\'" class=field.class.th><a ng-if=v.order href="" ng-click=CRUD.orderBy(v.key)>{{ v[v.key] }} <i ng-class="{\'fa fa-sort\':v.order,\'fa fa-sort-asc\':CRUD.orderAsc(v.key),\'fa fa-sort-desc\':CRUD.orderDesc(v.key)}"></i></a><h ng-if=!v.order>{{ v[v.key] }}</h><h ng-if=v.total ng-init="CRUD[\'totals\'][v.key]=0"></h></th><th ng-if=CRUD.aggregated[v.key] ng-repeat="v in CRUD.objectToArray(CRUD.definition.group.measures)| orderBy:\'index\'" class=field.class.th><a ng-if=v.order href="" ng-click=CRUD.orderBy(v.key)>{{ v[v.key] }} <i ng-class="{\'fa fa-sort\':v.order,\'fa fa-sort-asc\':CRUD.orderAsc(v.key),\'fa fa-sort-desc\':CRUD.orderDesc(v.key)}"></i></a><h ng-if=!v.order>{{ v[v.key] }}</h><h ng-if=v.total ng-init="CRUD[\'totals\'][v.key]=0"></h></th></tr></thead><tbody ng-if=!CRUD.working><!-- $data is a ngTable built-in var, it represents the partial data post pagination --><tr ng-repeat="item in CRUD.data" ng-class-odd="\'crud-odd-row\'"><td ng-if=CRUD.grouped[dimension.key] ng-repeat="dimension in CRUD.objectToArray(CRUD.definition.group.dimensions) | orderBy:\'index\'" crud-list-item><h ng-if=dimension.total ng-init="CRUD[\'totals\'][dimension.key]=CRUD[\'totals\'][dimension.key]+item[dimension.key]*1"></h><span ng-if=item>{{item[dimension.key]}}</span></td><td ng-if=CRUD.aggregated[measure.key] ng-repeat="measure in CRUD.objectToArray(CRUD.definition.group.measures) | orderBy:\'index\'" crud-list-item><h ng-if=measure.total ng-init="CRUD[\'totals\'][measure.key]=CRUD[\'totals\'][measure.key]+item[measure.key]*1"></h><span ng-if=item>{{item[measure.key]}}</span></td></tr></tbody><tfoot ng-if="CRUD.totals && Object.keys(CRUD.totals).length>0 && !CRUD.working"><tr ng-class-odd="\'crud-odd-row\'"><th class=field.class.th><h>{{ \'TOTALS\' | translate }}</h></th></tr><tr ng-class-odd="\'crud-odd-row\'"><td ng-if=CRUD.grouped[dimension.key] ng-repeat="dimension in CRUD.objectToArray(CRUD.definition.group.dimensions) | orderBy:\'index\'" crud-list-item><span>{{CRUD[\'totals\'][dimesion.key]}}</span></td><td ng-if=CRUD.aggregated[measure.key] ng-repeat="measure in CRUD.objectToArray(CRUD.definition.group.measures) | orderBy:\'index\'" crud-list-item><span>{{CRUD[\'totals\'][measure.key]}}</span></td></tr></tfoot></table><!-- NORMAL --><table ng-if=!CRUD.isGrouping() class="table table-condensed crud-table" ng-class=" {\'selectable\':CRUD.definition.allowselection}"><thead><tr><th ng-if=CRUD.columns[field.name] ng-repeat="field in CRUD.definition.fields | filter:{listable:true} | orderBy:\'position\'" class=field.class.th lr-show-at-least-on={{field.weight}}><a ng-if=field.order href="" ng-click=CRUD.orderBy(field.name)>{{ field.label }} <i ng-class="{\'fa fa-sort\':field.order,\'fa fa-sort-asc\':CRUD.orderAsc(field.name),\'fa fa-sort-desc\':CRUD.orderDesc(field.name)}"></i></a><h ng-if=!field.order>{{ field.label }}</h><h ng-if=field.total ng-init="CRUD[\'totals\'][field.name]=0"></h></th></tr></thead><tbody ng-if=!CRUD.working><!-- $data is a ngTable built-in var, it represents the partial data post pagination --><tr ng-repeat="item in CRUD.data" ng-click=CRUD.selected(item) ng-class="CRUD.selection==item?\'crud-tr-selected\':\'\'" ng-class-odd="\'crud-odd-row\'"><td ng-if=CRUD.columns[field.name]||CRUD.columns[field.field] ng-repeat="field in CRUD.definition.fields | filter:{listable:true}  | orderBy:\'position\'" sortable lr-show-at-least-on={{field.weight}} crud-list-item><h ng-if=field.total ng-init="CRUD[\'totals\'][field.name]=CRUD[\'totals\'][field.name]+CRUD.getFormattedValue(item,field)*1"></h><span ng-if="field.type!=\'actions\'">{{ CRUD.getFormattedValue(item,field)}}</span> <a ng-if="field.type==\'actions\'" ng-repeat=" actionDef in CRUD.definition.actions | filter:{target:\'list\'}||{target:undefined} | orderBy:\'position\' " href="" class="{{actionDef.class}} margin-right-sm" ng-click="this[actionDef.context||\'CRUD\'][actionDef.action](item)" ng-show={{actionDef.show}} ng-disabled={{actionDef.disabled}} lr-show-at-least-on={{actionDef.weight}}><i ng-if=actionDef.icon class={{actionDef.icon}}></i> {{ actionDef.label }}</a></td></tr></tbody><tfoot ng-if="CRUD.totals && Object.keys(CRUD.totals).length>0 && !CRUD.working"><tr ng-class-odd="\'crud-odd-row\'"><th class=field.class.th><h>{{ \'TOTALS\' | translate }}</h></th></tr><tr ng-class-odd="\'crud-odd-row\'"><td ng-repeat="field in CRUD.definition.fields | filter:{listable:true}  | orderBy:\'position\'" crud-list-item><span>{{CRUD[\'totals\'][field.name]}}</span></td></tr></tfoot></table><div ng-if="CRUD.maxRows<CRUD.totalItems && CRUD.paginationAvailable" class="pull-right crud-footer"><!--dinamyc pagination--><div ng-if=CRUD.dynamicItems class="btn-group crud-items-btn dropup" dropdown><button type=button class="btn btn-default" disabled>Display Items</button> <button type=button class="btn btn-default btn-last-child" dropdown-toggle>{{CRUD.maxRows}}</button><ul class=dropdown-menu role=menu><li ng-repeat="opt in CRUD.itemsPerPage"><a ng-click=CRUD.changeDisplay(opt)>{{opt}}</a></li></ul></div><pagination total-items=CRUD.totalItems ng-model=CRUD.currentPage ng-change=CRUD.pullDataPage() items-per-page=CRUD.maxRows max-size=10 class=crud-footer-pages></pagination></div><div class="clear-fix clear-both">&nbsp</div></div>'),
a.put("letrest-crud/views/crud-main.html",'<lr-show-when-logged><breadcrumbs></breadcrumbs></lr-show-when-logged><div><crud><crud-actions></crud-actions><crud-filters></crud-filters><div class=crud-body><crud-list></crud-list><crud-panel ng-if=CRUD.editing></crud-panel></div></crud></div><!-- DEPRECATED --><!-- <crud>\n    <crud-actions></crud-actions>\n    <crud-filters></crud-filters>\n    <crud-list class="remove-padding  padding-left-md margin-top-sm"\n               ng-class="!CRUD.editing?\'col-md-12 padding-right-md\':\'col-md-7\'"\n    >\n    </crud-list>\n    <crud-panel ng-if="CRUD.editing"\n                class="margin-top-sm col-md-5 remove-padding-left remove-padding-right remove-margin-left"\n    >\n    </crud-panel>\n</crud> --><!--\n\n            <span class="hidden-sm hidden-md hidden-xs"> Is large</span>\n            <span class=" hidden-md hidden-lg hidden-sm"> Is XSmall</span>\n            <span class=" hidden-md hidden-lg hidden-xs"> Is Small</span>\n            <span class="hidden-sm hidden-lg hidden-xs"> Is Medium</span>\n            -->'),a.put("letrest-crud/views/crud-new.html",'<div class=crud-panel><!--Header--><div class=crud-panel-header><span class=crud-panel-header-text><i class={{CRUD.definition.icon}}></i>&nbsp;{{CRUD.definition.name}}</span> <span class=pull-right style="cursor: pointer" ng-click=CRUD.cancel()><i class="fa fa-close fa-lg"></i></span></div><!--Body--><div class=crud-panel-body><!--<pre>{{ CRUD.selection | json }}</pre>--><crud-form definition=CRUD.definition item=CRUD.editing crud=CRUD></crud-form></div><!--Footer--><div class=crud-panel-footer><a href="" class="btn btn-primary btn-sm" ng-click=CRUD.saveItem() ng-disabled=false><i class="fa fa-check fa-lg"></i>&nbsp;{{ \'SAVE\' | translate }}</a> <a href="" class="btn btn-default btn-sm" ng-click=CRUD.cancel()><i class="fa fa-times fa-lg"></i>&nbsp;{{ \'CANCEL\' | translate }}</a></div></div>'),a.put("letrest-crud/views/modal-template.html",'<div class=modal-header><h3 class=modal-title>{{instance.header}}</h3></div><div class=modal-body>{{instance.text}}</div><div class=modal-footer ng-if=instance.selectable><button class="btn btn-primary" type=button ng-click=instance.ok()>OK</button> <button class="btn btn-warning" type=button ng-click=instance.cancel()>Cancel</button></div><div class=modal-footer ng-if=!instance.selectable><button class="btn btn-primary" type=button ng-click=instance.ok()>OK</button></div>')}]);